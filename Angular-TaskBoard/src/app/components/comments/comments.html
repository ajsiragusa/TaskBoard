<div class="comments-section">
    <h3>Comments</h3>

    <div class="add-comment">
        <h4>Add a Comment</h4>
        <div class="form-group">
            <label for="userEmail">Your Email:</label>
            <input id="userEmail" type="email" [(ngModel)]="userEmail" placeholder="Enter your email">
        </div>
        <div class="form-group">
            <label for="commentText">Comment:</label>
            <textarea id="commentText" [(ngModel)]="newCommentText" placeholder="Write your comment..." rows="3"></textarea>
        </div>
        <button (click)="addComment()">Add Comment</button>
    </div>

    <div *ngIf="successMessage()" class="success-message">
        {{ successMessage() }}
    </div>

    <div *ngIf="errorMessage()" class="error-message">
        {{ errorMessage() }}
    </div>

    <div *ngIf="isLoading()" class="loading-message">
        Loading comments...
    </div>

    <div *ngIf="!isLoading() && comments().length > 0" class="comments-list">
        <h4>{{ comments().length }} Comment(s)</h4>
        <div *ngFor="let comment of comments()" class="comment-card">
            <div class="comment-header">
                <span class="comment-author">{{ comment.user?.name || comment.user?.email || 'Anonymous' }}</span>
                <span class="comment-date">{{ formatDateTime(comment.date, comment.time) }}</span>
            </div>
            <div class="comment-body">
                {{ comment.comment }}
            </div>
        </div>
    </div>

    <div *ngIf="!isLoading() && comments().length === 0 && issueId" class="no-comments">
        No comments yet. Be the first to comment!
    </div>
</div>
